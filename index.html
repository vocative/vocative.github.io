<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
	<meta name="description" content="Vocative: The student-run class discussion platform">
	<meta name="copyright" content="Clive Chan, 2015">
	<meta name="author" content="Clive Chan (http://clive.io)">
	
	<title>Vocative</title>
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.css">
	<link rel="stylesheet" href="index-style.css">
</head>
<body>
	<h1>Vocative</h1>
	<h2>Deliberate. Analyze. Explore. <b>The student-run class discussion platform.</b></h2>
	<form id="roomform">
		<input type="text" id="roomname" placeholder="Some Class 101">
		<input type="submit" value="Enter room">
	</form>
	<footer>
		<p>Made with &lt;3 in Lexington</p>
		<p>written in HTML5, CSS3, JQuery, AngularJS, and Firebase</p>
		<p>by <a href="http://clive.io">Clive Chan</a></p>
	</footer>
	<script>
		//http://stackoverflow.com/a/979995/1181387
		var QueryString = function () {
		  // This function is anonymous, is executed immediately and 
		  // the return value is assigned to QueryString!
		  var query_string = {};
		  var query = window.location.search.substring(1);
		  var vars = query.split("&");
		  for (var i=0;i<vars.length;i++) {
			var pair = vars[i].split("=");
				// If first entry with this name
			if (typeof query_string[pair[0]] === "undefined") {
			  query_string[pair[0]] = decodeURIComponent(pair[1]);
				// If second entry with this name
			} else if (typeof query_string[pair[0]] === "string") {
			  var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
			  query_string[pair[0]] = arr;
				// If third or later entry with this name
			} else {
			  query_string[pair[0]].push(decodeURIComponent(pair[1]));
			}
		  } 
			return query_string;
		}();
		(function(){
			document.getElementById("roomform").onsubmit=function(){
				if(document.getElementById("roomname").value)
					window.location.assign("chat?room="+document.getElementById("roomname").value.toUpperCase());
				return false;
			};
			document.getElementById("roomname").focus();
			window.onfocus = function(){
				setTimeout(function(){document.getElementById("roomname").focus();},10);
			};
			if(QueryString.room !== undefined && QueryString.room)
				document.getElementById("roomname").value = QueryString.room;
			
		})();
	</script>
</body>
</html>
